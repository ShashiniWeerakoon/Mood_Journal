<div class="mood-history-container">
    <h2>Mood History</h2>
  
    <div class="filter-section">
      <form [formGroup]="dateFilterForm" class="filter-form">
        <div class="form-group">
          <label for="userId">User</label>
          <select id="userId" formControlName="userId" class="form-control">
            <option *ngFor="let user of users" [value]="user.id">{{ user.name }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="startDate">Start Date</label>
          <input id="startDate" type="date" formControlName="startDate" class="form-control">
        </div>
        <div class="form-group">
          <label for="endDate">End Date</label>
          <input id="endDate" type="date" formControlName="endDate" class="form-control">
        </div>
        <button type="button" (click)="loadMoodHistory()" class="filter-btn">Filter</button>
      </form>
    </div>
  
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  
    <div class="table-container">
      <table class="mood-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Mood</th>
            <th>Journal Text</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let entry of moodEntries">
            <td>{{ formatDate(entry.entryDate) }}</td>
            <td>
              <span class="mood-with-emoji">
                {{ entry.mood }} {{ getMoodEmoji(entry.mood) }}
              </span>
            </td>
            <td>{{ entry.journalText }}</td>
          </tr>
          <tr *ngIf="moodEntries.length === 0">
            <td colspan="3" class="no-entries">No mood entries found for the selected period.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
